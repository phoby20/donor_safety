<!DOCTYPE html>
<html lang="jp">

<head>
<meta charset="UTF-8">
<title>日本骨髄バンク 安全情報データベース</title>
<link href="css/normalize.css" rel="stylesheet" type="text/css">
<link href="css/skeleton-custom.css" rel="stylesheet" type="text/css">
<link href="css/styles.css" rel="stylesheet" type="text/css">
<link href="css/page.css" rel="stylesheet" type="text/css">

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet">

<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script type="text/javascript" src="js/class-select.js"></script>
<script type="text/javascript" language="javascript">

    // 브라우져가 로드되면 모든 설정을 초기화
    function rel() {
        if (window.name != "any") {
          location.reload();
          window.name = "any";
        } else {
          window.name = "";
        }
      }

var ageArr = new Array(); //필터 내용을 저장하는 배열
var showFilterValue = document.getElementById("showFilter");

//필터입력값 보여주기 위한 text
 //필터 내용을 저장하는 function
 function makeFilter(target){
     var ageVal = target.value; //check value
     var confirmCheck = target.checked; //check여부 확인

     console.log("필터 선택값 : "+ageVal);
     console.log("선택여부 : "+confirmCheck);

    // check true
    if(confirmCheck == true){
        console.log("check");
        ageArr.push(ageVal); // check value filter 배열에 입력

    }else{
        ageArr.splice(ageArr.indexOf(ageVal), 1);
        // check value filter 배열내용 삭제

    } showFilterValue.value = ageArr;
    // textBox에 필터 배열 추가
    console.log("필터입력값 출력 : "+ageArr);
}




     //chkBox_bmh 全体選択機能
     window.onload = function(){
        var hobbyAllBtn1 = document.getElementById('bmhSelectAll');
        hobbyAllBtn1.addEventListener('click', function(){
            if (hobbyAllBtn1.checked == true) {
               checkedAll('chkBox_bmh');
            } else {
               NotcheckedAll('chkBox_bmh');
            }
            
        });
        function checkedAll(checkType){
            for(var i = 0; i < document.getElementsByName(checkType).length; i++){
                document.getElementsByName(checkType)[i].checked = true;
            }
        }
        function NotcheckedAll(checkType){
           for(var i = 0; i < document.getElementsByName(checkType).length; i++){
               document.getElementsByName(checkType)[i].checked = false;
           }
       }
    }


     //chkBox_pbsch 全体選択機能
     // window.onload = function(){
     //     var hobbyAllBtn = document.getElementById('pbschSelectAll');
     //     hobbyAllBtn.addEventListener('click', function(){
     //         if (hobbyAllBtn.checked == true) {
     //            checkedAll('chkBox_pbsch');
     //         } else {
     //            NotcheckedAll('chkBox_pbsch');
     //         }
     //         
     //     });
     //     function checkedAll(checkType){
     //         for(var i = 0; i < document.getElementsByName(checkType).length; i++){
     //             document.getElementsByName(checkType)[i].checked = true;
     //         }
     //     }
     //     function NotcheckedAll(checkType){
     //        for(var i = 0; i < document.getElementsByName(checkType).length; i++){
     //            document.getElementsByName(checkType)[i].checked = false;
     //        }
     //    }
     // }




    // 検索ボタン押下時処理
    function onSearchClick() {

        // 年（From、To）の入力チェック（script.jsの関数呼び出し）
        if (!checkInputedYear()) {
            return false;
        }

        // キーワード
        mainKeyword = document.forms.sitesearch.inkeyword.value;

        var allKeyword = "";
        var len = document.sitesearch.chkBox.length;
        if ((len === undefined) && (document.sitesearch.chkBox.checked == true)) {
            chkdata[i] = document.sitesearch.chkBox[i].value;
            allKeyword = "　";
        } else {
            for (i = 0; i < len; i++) {
                if (document.sitesearch.chkBox[i].checked) {
                    // alert(document.sitesearch.chkBox[i].value);
                    allKeyword += document.sitesearch.chkBox[i].value + "　";
                }
            }
        }
        allKeyword += mainKeyword;
        document.getElementById('sendKey').value = allKeyword;



        // BMH
        // mainKeyword2 = document.forms.sitesearch.inkeyword.value;
        var allKeyword2 = "";
        var len2 = document.sitesearch.chkBox_bmh.length;
        if ((len2 === undefined) && (document.sitesearch.chkBox_bmh.checked == true)) {
            chkdata2[i] = document.sitesearch.chkBox_bmh[i].value;
            allKeyword2 = "　";
        } else {
            for (i = 0; i < len2; i++) {
                if (document.sitesearch.chkBox_bmh[i].checked) {
                    allKeyword2 += document.sitesearch.chkBox_bmh[i].value + "　";
                }
            }
        }
        // allKeyword += mainKeyword2;
        // console.log(len);
        document.getElementById('sendKey2').value = allKeyword2;





        // PBSCH
        var allKeyword3 = "";
        var len3 = document.sitesearch.chkBox_pbsch.length;
        if ((len3 === undefined) && (document.sitesearch.chkBox_pbsch.checked == true)) {
            chkdata3[i] = document.sitesearch.chkBox_pbsch[i].value;
            allKeyword3 = "　";
        } else {
            for (i = 0; i < len3; i++) {
                if (document.sitesearch.chkBox_pbsch[i].checked) {
                    allKeyword3 += document.sitesearch.chkBox_pbsch[i].value + "　";
                }
            }
        }
        document.getElementById('sendKey3').value = allKeyword3;





        // case_place
        var allKeyword4 = "";
        var len4 = document.sitesearch.case_place.length;
        if ((len4 === undefined) && (document.sitesearch.case_place.checked == true)) {
            chkdata4[i] = document.sitesearch.case_place[i].value;
            allKeyword4 = "　";
        } else {
            for (i = 0; i < len4; i++) {
                if (document.sitesearch.case_place[i].checked) {
                    allKeyword4 += document.sitesearch.case_place[i].value + "　";
                }
            }
        }
        document.getElementById('sendKey4').value = allKeyword4;

            return true;
    }





    // // 検索ボタン押下時処理
    // function onSearchClick2() {

    // // 年（From、To）の入力チェック（script.jsの関数呼び出し）
    // if (!checkInputedYear()) {
    //     return false;
    // }

    // // キーワード
    // mainKeyword2 = document.forms.sitesearch.inkeyword.value;
    // var allKeyword = "";
    // var len = document.sitesearch.chkBox_bmh.length;
    // if ((len === undefined) && (document.sitesearch.chkBox_bmh.checked == true)) {
    //     chkdata[i] = document.sitesearch.chkBox_bmh[i].value;
    //     allKeyword = "　";
    // } else {
    //     for (i = 0; i < len; i++) {
    //         if (document.sitesearch.chkBox_bmh[i].checked) {
    //             allKeyword += document.sitesearch.chkBox_bmh[i].value + "　";
    //         }
    //     }
    // }
    // // allKeyword += mainKeyword2;
    // console.log(len);
    // document.getElementById('sendKey2').value = allKeyword;

    // return true;
    // }
</script>
</head>

<body onLoad="rel()">
<div id="head-bar">
    <div class="inner">
        <div class="head-title-block">
            <a href="index.html">
                <h1 class="head-title">日本骨髄バンク　安全情報データベース</h1>
                <!-- <p class="head-title-sub">SANYO DOCUMENT SEARCH</p> -->
            </a>
        </div>
    </div>
</div>
<!--検索-->
<div id="topsearch">
    <div id="mv">
        <div class="mv-title-block">
            <h2 class="mv-title" style="color: rgb(61, 61, 61); font-weight: bold;">安全情報データベース</h2>
        </div>
    </div>
    <form id="sitesearch" name="sitesearch" action="search.html" method="get">

        <div class="form-block">


            <div class="row tr">

                <div class="three columns th">
                    <span>採取方法</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_bmh" value="骨髄採取"><span> 骨髄採取</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_bmh" value="末梢血"><span> 末梢血</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_bmh" value="DLI"><span> DLI</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" id="bmhSelectAll" name="SelectAll"><span> All</span></label></li>
                    </ul>
                </div>
            </div>



            <div class="row tr">
                <div class="three columns th" style="height: 76px;">
                    <span>通知区分</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_pbsch" value="緊急安全情報"><span> 緊急安全情報</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_pbsch" value="安全情報"><span> 安全情報</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_pbsch" value="通知文"><span> 通知文</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_pbsch" value="医療委員会より発出"><span> 医療委員会より発出</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" name="chkBox_pbsch" value="医師宛通知文"><span> 医師宛通知文</span></label></li>
                        <li style="width: 25%;"><label><input type="checkbox" id="pbschSelectAll" name="SelectAll"><span> All</span></label></li>
                    </ul>
                </div>
            </div>
            <script language="JavaScript" type="text/javascript">
                var hobbyAllBtn1 = document.getElementById('bmhSelectAll');
                var hobbyAllBtn = document.getElementById('pbschSelectAll');
                hobbyAllBtn.addEventListener('click', function(){
                    if (hobbyAllBtn.checked == true) {
                        checkedAll('chkBox_pbsch');
                    } else {
                        NotcheckedAll('chkBox_pbsch');
                    }
                    
                });
                function checkedAll(checkType){
                    for(var i = 0; i < document.getElementsByName(checkType).length; i++){
                        document.getElementsByName(checkType)[i].checked = true;
                    }
                }
                function NotcheckedAll(checkType){
                    for(var i = 0; i < document.getElementsByName(checkType).length; i++){
                        document.getElementsByName(checkType)[i].checked = false;
                    }
                }
                
                hobbyAllBtn1.addEventListener('click', function(){
                    if (hobbyAllBtn1.checked == true) {
                    checkedAll('chkBox_bmh');
                    } else {
                    NotcheckedAll('chkBox_bmh');
                    }
                    
                });
                function checkedAll(checkType){
                    for(var i = 0; i < document.getElementsByName(checkType).length; i++){
                        document.getElementsByName(checkType)[i].checked = true;
                    }
                }
                function NotcheckedAll(checkType){
                for(var i = 0; i < document.getElementsByName(checkType).length; i++){
                    document.getElementsByName(checkType)[i].checked = false;
                }
            }
            </script>


            <div class="row tr" style="display: none;">
                <div class="three columns th" style="height:76px;">
                    <span>事例区分</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <!-- <li><label><input type="button" id="SelectAllBtn" value="Select All"/></label></li> -->
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="ドナーの有害事象"><span> ドナーの有害事象</span></label></li>
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="採取産物・採取バンク関連"><span> 採取産物・採取バンク関連</span></label></li>
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="自己血"><span> 自己血</span></label></li>
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="医療機器"><span> 医療機器</span></label></li>
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="麻酔関連"><span> 麻酔関連</span></label></li>
                        <li style="width: 33%;"><label><input type="checkbox" name="case_place" value="その他"><span> その他</span></label></li>
                    </ul>
                </div>
            </div>






            <div class="row tr"">
                <div class="three columns th" style="height: 54px;">
                    <span>キーワード入力</span><!-- <span class="required">必須</span> -->
                </div>
                <div class="nine columns td">
                    <input size="20" type="text" id="inkeyword" class="keyword" placeholder="キーワードを入力してください" />
                </div>
            </div>




            <div class="row tr">
                <div class="three columns th" style="padding-right: 0px;">
                    <span>よく使うキーワード</span>
                </div>
                <div class="nine columns td keyword-list">
                    <!-- <p class="keyword-category">区分</p> -->
                    <ul class="checkList">
                        <li style="padding: 0px;"><label><input type="checkbox" name="chkBox" value="出血"><span> 出血</span></label></li>
                        <li><label><input type="checkbox" name="chkBox" value="アレルギー"><span> アレルギー</span></label></li>
                        <li><label><input type="checkbox" name="chkBox" value="採取バック関連"><span> 採取バック関連</span></label></li>
                        <li><label><input type="checkbox" name="chkBox" value="カテーテル"><span> カテーテル</span></label></li>
                        <li><label><input type="checkbox" name="chkBox" value="妊娠"><span> 妊娠</span></label></li>
                    </ul>
                </div>
            </div>





            <!-- ここからは displayを noneに設定 -->
            <!-- <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>形態</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li><label><input type="radio" name="refine1" value="紙資料"><span> 紙資料</span></label></li>
                        <li><label><input type="radio" name="refine1" value="書簡"><span> 書簡</span></label></li>
                        <li><label><input type="radio" name="refine1" value="はがき"><span> はがき</span></label></li>
                        <li><label><input type="radio" name="refine1" value="冊子"><span> 冊子</span></label></li>
                        <li><label><input type="radio" name="refine1" value="カセットテープ"><span> カセット</span></label></li>
                        <li><label><input type="radio" name="refine1" value="null" checked><span> すべて</span></label></li>
                    </ul>
                </div>
            </div> -->
            <!-- <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>作成年代</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li><label><input type="radio" name="refine2" value="18"><span> 1800年代</span></label></li>
                        <li><label><input type="radio" name="refine2" value="19"><span> 1900年代</span></label></li>
                        <li><label><input type="radio" name="refine2" value="20"><span> 2000年代</span></label></li>
                        <li><label><input type="radio" name="refine2" value="null" checked><span> すべて</span></label></li>
                    </ul>
                </div>
            </div> -->
            <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>作成年</span>
                </div>
                <div class="nine columns td">
                    <input type="text" name="yearfrom" size="4" minlength="4" maxlength="4" placeholder="0000" />年
                    ～
                    <input type="text" name="yearto" size="4" minlength="4" maxlength="4" placeholder="0000" />年
                </div>
            </div>
            <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>画像の有無</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li><label><input type="radio" name="hasimage" value="1"><span> 画像あり</span></label></li>
                        <li><label><input type="radio" name="hasimage" value="2"><span> 画像なし</span></label></li>
                        <li><label><input type="radio" name="hasimage" value="null" checked><span> すべて</span></label></li>
                    </ul>
                </div>
            </div>
            <!-- ここまでが display none -->

            <!-- ここまでが display none -->




            <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>項目</span>
                </div>
                <div class="nine columns td">
                    <ul class="selectList">
                        <li>
                            <label for="class1">分類１：</label>
                            <select id="class1" name="class1">
                            </select>
                        </li>

                        <li>
                            <label for="class2">分類２：</label>
                            <select id="class2" name="class2">
                            </select>
                        </li>
                        <li style="display: none;">
                            <label for="class3">小分類：</label>
                            <select id="class3" name="class3">
                            </select>
                        </li>
                    </ul>
                </div>
            </div>







            <!-- 以下は非表示 -->
            <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>BMH (type)</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <!-- select all ボタンを　Onにしたいときにコメント解除 -->
                        <!-- <li><label><input type="button" id="SelectAllBtn" value="Select All"/></label></li> -->
                        <li><label><input type="checkbox" name="refine1" value="null" checked><span> すべて</span></label></li>
                        <li><label><input type="checkbox" name="refine1" value="A" onchange="makeFilter(this);"><span> A</span></label></li>
                        <li><label><input type="checkbox" name="refine1" value="B" onchange="makeFilter(this);"><span> B</span></label></li>
                        <li><label><input type="checkbox" name="refine1" value="C" onchange="makeFilter(this);"><span> C</span></label></li>
                        <li><label><input type="checkbox" name="refine1" value="D" onchange="makeFilter(this);"><span> D</span></label></li>
                        <!-- <li><label><input type="checkbox" name="refine1" value="E" onchange="makeFilter(this);"><span> E</span></label></li>
                        <li><label><input type="checkbox" name="refine1" value="F" onchange="makeFilter(this);"><span> F</span></label></li> -->
                        <!-- <li><label><input type="checkbox" name="refine1" value="-"><span> -</span></label></li> -->
                        <!-- <input type="text" id="showFilter"/> -->
                    </ul>
                </div>
            </div>


            <div class="row tr" style="display: none;">
                <div class="three columns th">
                    <span>PBSCH (state)</span>
                </div>
                <div class="nine columns td">
                    <ul class="checkList upper">
                        <li><label><input type="checkbox" name="refine2" value="null" checked><span> すべて</span></label></li>
                        <li><label><input type="checkbox" name="refine2" value="A"><span> A</span></label></li>
                        <li><label><input type="checkbox" name="refine2" value="B"><span> B</span></label></li>
                        <li><label><input type="checkbox" name="refine2" value="C"><span> C</span></label></li>
                        <li><label><input type="checkbox" name="refine2" value="D"><span> D</span></label></li>
                        <!-- <li><label><input type="checkbox" name="refine2" value="E"><span> E</span></label></li>
                        <li><label><input type="checkbox" name="refine2" value="F"><span> F</span></label></li> -->
                    </ul>
                </div>
            </div>
            <!-- ここまでは非表示 -->




        </div>
        <!-- /.form-block -->

        <div class="btnArea">
            <button title="検索" type="submit" class="formbtn large" name="submit2" onclick="onSearchClick();">検　索</button>
        </div>
        <input id="sendKey" type="hidden" name="keyword" value="">
        <input id="sendKey2" type="hidden" name="bmh" value="">
        <input id="sendKey3" type="hidden" name="pbsch" value="">
        <input id="sendKey4" type="hidden" name="cases" value="">
    </form>


    <div class="hr"></div>
    <div id="memo">
        <!-- <h4>検索方法について</h4>
        <ul>
            <li>採取方法および通知区分、事例区分は<strong style="color: red;">必須項目</strong>です。</li>
            <li>複数のキーワードを含む検索（AND検索）が可能です。単語と単語の間にスペースを開けて検索して下さい。</li>
        </ul> -->
    </div>
    <div id="footer"> Copyright &copy; JMDP. All Rights Reserved. </div>
</div>
<!--検索-->
</body>

</html>
